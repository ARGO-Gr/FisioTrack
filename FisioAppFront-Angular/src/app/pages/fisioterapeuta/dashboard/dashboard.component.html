<div class="min-h-screen bg-background">
  <!-- Header Navigation -->
  <header class="border-b border-border bg-card sticky top-0 z-50">
    <div class="container mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2">
          <mat-icon class="text-primary">favorite_border</mat-icon>
          <h1 class="text-2xl font-bold">FisioTrack</h1>
        </div>
        <nav class="flex items-center gap-4">
          <a routerLink="/fisioterapeuta/dashboard" class="text-sm font-medium hover:text-primary transition-colors">
            Dashboard
          </a>
          <a routerLink="/fisioterapeuta/agenda" class="text-sm font-medium hover:text-primary transition-colors">
            Agenda
          </a>
          <a routerLink="/fisioterapeuta/pacientes" class="text-sm font-medium hover:text-primary transition-colors">
            Pacientes
          </a>
          <app-user-menu
            (changeInfo)="onChangeInfo()"
            (logout)="logout()"
          ></app-user-menu>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">
    <h2 class="text-4xl font-bold text-foreground mb-8">Dashboard Fisioterapeuta</h2>

    <!-- Recent Appointments -->
    <app-card class="mb-8">
      <app-card-header className="flex items-center justify-between w-full !grid-cols-2 px-6">
        <app-card-title>Próximas Citas</app-card-title>
        <button
          (click)="openResumenModal()"
          class="flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors text-sm font-medium w-fit"
          title="Ver resumen del día"
        >
          <mat-icon class="text-lg">assessment</mat-icon>
          <span>Resumen</span>
        </button>
      </app-card-header>
      <app-card-content>
        <div *ngIf="proximasCitas.length > 0; else noCitas" class="space-y-3">
          <div *ngFor="let cita of proximasCitas" 
            class="p-4 rounded-lg border-2 flex items-center justify-between gap-4"
            [ngClass]="getCitaColor(cita)">
            
            <!-- Hora y Paciente -->
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-3 mb-2">
                <div class="flex-shrink-0 w-12 font-medium text-foreground">
                  {{ cita.hora }}
                </div>
                <div class="flex-1 min-w-0">
                  <div class="flex items-center gap-2 mb-1">
                    <mat-icon class="text-foreground text-base flex-shrink-0">person</mat-icon>
                    <h4 class="font-semibold text-foreground truncate">{{ cita.nombrePaciente }}</h4>
                  </div>
                  <p class="text-xs text-muted-foreground truncate">{{ cita.descripcion || 'Sin descripción' }}</p>
                </div>
              </div>
              
              <!-- Teléfono -->
              <div class="flex items-center gap-2 ml-15 text-xs text-foreground">
                <mat-icon class="text-muted-foreground text-sm flex-shrink-0">phone</mat-icon>
                <p class="truncate">{{ cita.telefonoPaciente || 'Sin teléfono' }}</p>
              </div>
            </div>
            
            <!-- Doble Semáforo de Estados (Compacto) -->
            <div class="flex items-center gap-3 flex-shrink-0">
              <!-- Semáforo Fisio -->
              <div class="flex items-center gap-1 px-2 py-1 rounded bg-white/50">
                <div class="w-3 h-3 rounded-full flex-shrink-0" [ngClass]="getColorFisio(cita.estadoFisio)"></div>
                <p class="text-xs font-semibold text-muted-foreground whitespace-nowrap">{{ cita.estadoFisio }}</p>
              </div>
              
              <!-- Semáforo Paciente -->
              <div class="flex items-center gap-1 px-2 py-1 rounded bg-white/50">
                <div class="w-3 h-3 rounded-full flex-shrink-0" [ngClass]="getColorPaciente(cita.estadoPaciente)"></div>
                <p class="text-xs font-semibold text-muted-foreground whitespace-nowrap">{{ cita.estadoPaciente }}</p>
              </div>
            </div>
          </div>
        </div>
        <ng-template #noCitas>
          <p class="text-muted-foreground text-center py-4">No hay citas programadas para hoy</p>
        </ng-template>
      </app-card-content>
    </app-card>

  </main>
</div>
