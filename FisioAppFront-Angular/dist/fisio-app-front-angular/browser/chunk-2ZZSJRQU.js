import{a as le}from"./chunk-3SOA4LHR.js";import{a as se,b as de}from"./chunk-ZRTNGKXI.js";import{a as O}from"./chunk-CJ3OBUWM.js";import{b as Z,c as ee,d as te,f as ie}from"./chunk-AXJP532N.js";import{c as k,j as re}from"./chunk-B6JTRMRK.js";import{a as $}from"./chunk-RWZ5TKRV.js";import"./chunk-MIONVMI7.js";import{a as ae,b as ne,c as L,e as oe}from"./chunk-BV64I7NB.js";import"./chunk-Y2M3SQ4J.js";import{Ab as K,Ba as a,Bb as T,C as S,Ca as n,Da as _,Ha as H,Ja as C,Ka as g,Lb as Q,Mb as X,P as D,Q as E,Sa as Y,Ta as o,Ua as u,Va as b,Xa as q,da as s,db as I,fb as U,g as F,gb as G,ha as v,hb as z,la as w,pa as f,pc as j,qc as R,ta as p,tb as M,ua as J,ub as A,va as N,vb as P,wa as B,yb as W}from"./chunk-OSJLVL2X.js";function be(r,t){if(r&1&&(a(0,"span",21),o(1),I(2,"date"),n()),r&2){let e=g();s(),b(" ",U(2,1,e.fechaSeleccionada,"dd MMMM yyyy")," ")}}function Ce(r,t){if(r&1&&(a(0,"span",21),o(1),I(2,"date"),n()),r&2){let e=g();s(),b(" ",U(2,1,e.fechaSeleccionada,"MMMM yyyy")," ")}}function _e(r,t){if(r&1&&_(0,"div"),r&2){let e=t.$implicit,i=g(5);B("w-1.5 h-1.5 rounded-full "+(i.getAppointmentStatus(e)==="completed"?"bg-green-500":"")+(i.getAppointmentStatus(e)==="confirmed"?"bg-blue-500":"")+(i.getAppointmentStatus(e)==="pending-payment"?"bg-orange-500":"")+(i.getAppointmentStatus(e)==="pending"?"bg-yellow-500":"")+(i.getAppointmentStatus(e)==="canceled"?"bg-red-500":""))}}function Se(r,t){if(r&1&&(a(0,"div",32),f(1,_e,1,2,"div",33),n()),r&2){let e=g(2).$implicit,i=g(2);s(),p("ngForOf",i.getAppointmentsForDate(e))}}function ye(r,t){if(r&1&&(a(0,"div",29)(1,"span",30),o(2),n(),f(3,Se,2,1,"div",31),n()),r&2){let e=g().$implicit,i=g(2);s(2),u(e.getDate()),s(),p("ngIf",i.getAppointmentsForDate(e).length>0)}}function De(r,t){r&1&&_(0,"div",34)}function Ee(r,t){if(r&1&&(a(0,"div",26),f(1,ye,4,2,"div",27)(2,De,1,0,"div",28),n()),r&2){let e=t.$implicit;s(),p("ngIf",e),s(),p("ngIf",!e)}}function Ie(r,t){if(r&1&&(a(0,"div")(1,"div",22)(2,"div",23),o(3,"Lun"),n(),a(4,"div",23),o(5,"Mar"),n(),a(6,"div",23),o(7,"Mi\xE9"),n(),a(8,"div",23),o(9,"Jue"),n(),a(10,"div",23),o(11,"Vie"),n(),a(12,"div",23),o(13,"Sab"),n(),a(14,"div",23),o(15,"Dom"),n()(),a(16,"div",24),f(17,Ee,3,2,"div",25),n()()),r&2){let e=g();s(17),p("ngForOf",e.calendarDays)}}var V=class r{constructor(t,e,i,d,l){this.data=t;this.authService=e;this.appointmentService=i;this.dialog=d;this.dialogRef=l;this.fisioterapeutaId=this.authService.getUserId()||""}pestanaActiva="dia";fechaSeleccionada=new Date;totalCitasFiltradas=0;amarillasFiltradas=0;azulesFiltradas=0;verdesFiltradas=0;naranjasFiltradas=0;rojasFiltradas=0;todasLasCitas=[];cargando=!1;fisioterapeutaId="";calendarDays=[];destroy$=new F;ngOnInit(){this.cargarCitasDelDia()}cambiarPestana(t){this.pestanaActiva=t,t==="dia"?this.cargarCitasDelDia():this.cargarCitasDelMes()}abrirSelectorFecha(){this.pestanaActiva==="dia"?this.dialog.open(se,{width:"400px",data:{selectedDate:this.fechaSeleccionada}}).afterClosed().subscribe(e=>{e&&(this.fechaSeleccionada=new Date(e),this.cargarCitasDelDia())}):this.dialog.open(de,{width:"400px",data:{selectedDate:this.fechaSeleccionada}}).afterClosed().subscribe(e=>{e&&(this.fechaSeleccionada=new Date(e),this.cargarCitasDelMes())})}cargarCitasDelDia(){if(!this.fisioterapeutaId){console.error("No fisioterapeuta ID available");return}this.cargando=!0;let t=this.getFormattedDate(this.fechaSeleccionada);console.log("\u{1F4C5} Cargando citas del d\xEDa:",t),this.appointmentService.getAppointmentsByDay(this.fisioterapeutaId,t).pipe(S(this.destroy$)).subscribe({next:e=>{this.todasLasCitas=e,console.log("\u2713 Citas cargadas:",e.length),this.calcularEstadisticas(),this.cargando=!1},error:e=>{console.error("Error cargando citas:",e),this.todasLasCitas=[],this.calcularEstadisticas(),this.cargando=!1}})}cargarCitasDelMes(){if(!this.fisioterapeutaId){console.error("No fisioterapeuta ID available");return}this.cargando=!0;let t=this.fechaSeleccionada.getFullYear(),e=this.fechaSeleccionada.getMonth(),i=new Date(t,e,1),d=new Date(t,e+1,0),l=this.getFormattedDate(i),h=this.getFormattedDate(d);console.log("\u{1F4C5} Cargando citas del mes:",{fechaInicio:l,fechaFin:h}),this.appointmentService.getAppointmentsByDateRange(this.fisioterapeutaId,l,h).pipe(S(this.destroy$)).subscribe({next:c=>{this.todasLasCitas=c,console.log("\u2713 Citas del mes cargadas:",c.length),this.calcularEstadisticas(),this.generarCalendario(),this.cargando=!1},error:c=>{console.error("Error cargando citas del mes:",c),this.todasLasCitas=[],this.calcularEstadisticas(),this.generarCalendario(),this.cargando=!1}})}calcularEstadisticas(){let t=this.todasLasCitas;this.totalCitasFiltradas=t.length,this.amarillasFiltradas=t.filter(e=>this.isEstadoPendiente(e)).length,this.azulesFiltradas=t.filter(e=>this.isEstadoConfirmada(e)).length,this.verdesFiltradas=t.filter(e=>this.isEstadoCobrada(e)).length,this.naranjasFiltradas=t.filter(e=>this.isEstadoCobroPendiente(e)).length,this.rojasFiltradas=t.filter(e=>this.isEstadoCancelada(e)).length,console.log("\u{1F4CA} Estad\xEDsticas calculadas:",{total:this.totalCitasFiltradas,pendientes:this.amarillasFiltradas,confirmadas:this.azulesFiltradas,cobradas:this.verdesFiltradas,cobroPendiente:this.naranjasFiltradas,canceladas:this.rojasFiltradas})}getFormattedDate(t){let e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),d=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${d}`}isEstadoCobrada(t){return t.estadoFisio?.toLowerCase()==="cobrado"}isEstadoCobroPendiente(t){return t.estadoFisio?.toLowerCase()==="cobropendiente"}isEstadoCancelada(t){let e=t.estadoFisio?.toLowerCase(),i=t.estadoPaciente?.toLowerCase();return e==="canceladafisio"||i==="canceladapaciente"}isEstadoConfirmada(t){let e=t.estadoFisio?.toLowerCase(),i=t.estadoPaciente?.toLowerCase();return e==="confirmadofisio"&&i==="confirmadopaciente"}isEstadoPendiente(t){return!this.isEstadoCobrada(t)&&!this.isEstadoCobroPendiente(t)&&!this.isEstadoCancelada(t)&&!this.isEstadoConfirmada(t)}getCitaColor(t){return this.isEstadoCobrada(t)?"bg-green-100 border-green-300":this.isEstadoCobroPendiente(t)?"bg-orange-100 border-orange-300":this.isEstadoCancelada(t)?"bg-red-100 border-red-300":this.isEstadoConfirmada(t)?"bg-blue-100 border-blue-300":"bg-yellow-100 border-yellow-300"}generarCalendario(){this.calendarDays=[];let t=this.fechaSeleccionada.getFullYear(),e=this.fechaSeleccionada.getMonth(),i=new Date(t,e,1),d=new Date(i),l=d.getDay(),h=l===0?-6:1-l;d.setDate(d.getDate()+h);for(let c=0;c<42;c++){c>0&&d.setDate(d.getDate()+1);let m=new Date(d);m.getMonth()===e?this.calendarDays.push(new Date(m)):this.calendarDays.push(null)}}getAppointmentsForDate(t){if(!t)return[];let e=t.toISOString().split("T")[0];return this.todasLasCitas.filter(i=>new Date(i.fecha).toISOString().split("T")[0]===e)}getAppointmentStatus(t){return t.estadoFisio==="Cobrado"?"completed":t.estadoFisio==="CobroPendiente"?"pending-payment":t.estadoFisio==="CanceladaFisio"||t.estadoPaciente==="CanceladaPaciente"?"canceled":t.estadoFisio==="ConfirmadoFisio"&&t.estadoPaciente==="ConfirmadoPaciente"?"confirmed":"pending"}cerrarDialog(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||r)(v(ne),v($),v(O),v(L),v(ae))};static \u0275cmp=w({type:r,selectors:[["app-resumen-citas-modal"]],decls:46,vars:22,consts:[[1,"flex","gap-4","mb-1","border-b","border-border"],[1,"pb-2","px-4","font-semibold","transition-all",3,"click","ngClass"],[1,"text-2xl","font-bold","mb-2","text-foreground"],[1,"flex","justify-center","mb-2"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-muted","hover:bg-muted/80","transition-colors",3,"click"],["class","text-sm font-medium",4,"ngIf"],[1,"grid","grid-cols-2","gap-2","mb-4"],[1,"flex","items-center","justify-between","p-2","rounded-lg","bg-muted/50"],[1,"text-xs","text-muted-foreground"],[1,"text-lg","font-bold","text-foreground"],[1,"flex","items-center","justify-between","p-2","rounded-lg","bg-yellow-100","border","border-yellow-300"],[1,"text-lg","font-bold","text-yellow-700"],[1,"flex","items-center","justify-between","p-2","rounded-lg","bg-blue-100","border","border-blue-300"],[1,"text-lg","font-bold","text-blue-700"],[1,"flex","items-center","justify-between","p-2","rounded-lg","bg-green-100","border","border-green-300"],[1,"text-lg","font-bold","text-green-700"],[1,"flex","items-center","justify-between","p-2","rounded-lg","bg-orange-100","border","border-orange-300"],[1,"text-lg","font-bold","text-orange-700"],[1,"flex","items-center","justify-between","p-2","rounded-lg","bg-red-100","border","border-red-300"],[1,"text-lg","font-bold","text-red-700"],[4,"ngIf"],[1,"text-sm","font-medium"],[1,"grid","grid-cols-7","gap-1","mb-2"],[1,"text-center","font-semibold","text-xs","text-muted-foreground","p-1"],[1,"grid","grid-cols-7","gap-1"],["class","day-cell",4,"ngFor","ngForOf"],[1,"day-cell"],["class","w-full h-12 rounded border bg-white border-gray-300 flex flex-col items-center justify-center transition-all text-xs",4,"ngIf"],["class","w-full h-12 rounded",4,"ngIf"],[1,"w-full","h-12","rounded","border","bg-white","border-gray-300","flex","flex-col","items-center","justify-center","transition-all","text-xs"],[1,"font-semibold","text-foreground","text-xs"],["class","flex gap-0.5 mt-0.5 flex-wrap justify-center px-0.5",4,"ngIf"],[1,"flex","gap-0.5","mt-0.5","flex-wrap","justify-center","px-0.5"],[3,"class",4,"ngFor","ngForOf"],[1,"w-full","h-12","rounded"]],template:function(e,i){e&1&&(a(0,"div")(1,"div",0)(2,"button",1),C("click",function(){return i.cambiarPestana("dia")}),o(3," D\xEDa "),n(),a(4,"button",1),C("click",function(){return i.cambiarPestana("mes")}),o(5," Mes "),n()(),a(6,"h2",2),o(7),n(),a(8,"div",3)(9,"button",4),C("click",function(){return i.abrirSelectorFecha()}),a(10,"mat-icon"),o(11,"calendar_today"),n(),f(12,be,3,4,"span",5)(13,Ce,3,4,"span",5),n()(),a(14,"div",6)(15,"div",7)(16,"span",8),o(17,"Total"),n(),a(18,"span",9),o(19),n()(),a(20,"div",10)(21,"span",8),o(22,"Pendientes"),n(),a(23,"span",11),o(24),n()(),a(25,"div",12)(26,"span",8),o(27,"Confirmadas"),n(),a(28,"span",13),o(29),n()(),a(30,"div",14)(31,"span",8),o(32,"Cobradas"),n(),a(33,"span",15),o(34),n()(),a(35,"div",16)(36,"span",8),o(37,"Cobro Pendiente"),n(),a(38,"span",17),o(39),n()(),a(40,"div",18)(41,"span",8),o(42,"Canceladas"),n(),a(43,"span",19),o(44),n()()(),f(45,Ie,18,1,"div",20),n()),e&2&&(B(i.pestanaActiva==="mes"?"p-6 pb-2":"p-6"),s(2),N("border-b-2",i.pestanaActiva==="dia")("border-primary",i.pestanaActiva==="dia"),p("ngClass",i.pestanaActiva==="dia"?"text-primary":"text-muted-foreground"),s(2),N("border-b-2",i.pestanaActiva==="mes")("border-primary",i.pestanaActiva==="mes"),p("ngClass",i.pestanaActiva==="mes"?"text-primary":"text-muted-foreground"),s(3),b("Resumen del ",i.pestanaActiva==="dia"?"D\xEDa":"Mes",""),s(5),p("ngIf",i.pestanaActiva==="dia"),s(),p("ngIf",i.pestanaActiva==="mes"),s(6),u(i.totalCitasFiltradas),s(5),u(i.amarillasFiltradas),s(5),u(i.azulesFiltradas),s(5),u(i.verdesFiltradas),s(5),u(i.naranjasFiltradas),s(5),u(i.rojasFiltradas),s(),p("ngIf",i.pestanaActiva==="mes"))},dependencies:[T,M,A,P,W,oe,R,j,k],encapsulation:2})};function Fe(r,t){if(r&1&&(a(0,"div",31)(1,"span",32),o(2),n()()),r&2){let e=g().$implicit,i=g(2);s(2),b(" ",i.formatFecha(e.fecha)," ")}}function we(r,t){if(r&1&&(a(0,"div",15)(1,"div",16),f(2,Fe,3,1,"div",17),a(3,"div",18)(4,"div",19),o(5),n(),a(6,"div",16)(7,"div",20)(8,"mat-icon",21),o(9,"person"),n(),a(10,"h4",22),o(11),n()(),a(12,"p",23),o(13),n()()(),a(14,"div",24)(15,"mat-icon",25),o(16,"phone"),n(),a(17,"p",26),o(18),n()()(),a(19,"div",27)(20,"div",28),_(21,"div",29),a(22,"p",30),o(23),n()(),a(24,"div",28),_(25,"div",29),a(26,"p",30),o(27),n()()()()),r&2){let e=t.$implicit,i=g(2);p("ngClass",i.getCitaColor(e)),s(2),p("ngIf",!i.isHoyCita(e.fecha)),s(3),b(" ",e.hora," "),s(6),u(e.nombrePaciente),s(2),u(e.tipo||"Sin tipo"),s(5),u(e.telefonoPaciente||"Sin tel\xE9fono"),s(3),p("ngClass",i.getColorFisio(e.estadoFisio)),s(2),u(e.estadoFisio),s(2),p("ngClass",i.getColorPaciente(e.estadoPaciente)),s(2),u(e.estadoPaciente)}}function Me(r,t){if(r&1&&(a(0,"div",33),o(1),a(2,"a",34),o(3,"Ver agenda completa"),n()()),r&2){let e=g(2);s(),b(" +",e.proximasCitas.length-5," citas m\xE1s. ")}}function Ae(r,t){if(r&1&&(a(0,"div",12),f(1,we,28,10,"div",13),I(2,"slice"),f(3,Me,4,1,"div",14),n()),r&2){let e=g();s(),p("ngForOf",G(2,2,e.proximasCitas,0,5)),s(2),p("ngIf",e.proximasCitas.length>5)}}function Pe(r,t){r&1&&(a(0,"p",35),o(1,"No hay citas pr\xF3ximas programadas"),n())}function Te(r,t){if(r&1&&(a(0,"div",49)(1,"div",50)(2,"span",51),o(3,"Progreso"),n(),a(4,"span",52),o(5),n()(),a(6,"div",53),_(7,"div",54),n()()),r&2){let e=g().$implicit;s(5),q(" ",e.diasCompletados,"/",e.diasTotales," d\xEDas (",e.porcentajeProgreso,"%) "),s(2),J("width",e.porcentajeProgreso,"%")}}function $e(r,t){r&1&&(a(0,"div",55)(1,"div",56)(2,"mat-icon",57),o(3,"info"),n(),a(4,"span"),o(5,"Sin programa activo"),n()()())}function je(r,t){if(r&1){let e=H();a(0,"div",38),C("click",function(){let d=D(e).$implicit,l=g(2);return E(l.navigateToPaciente(d.id))}),a(1,"div",39)(2,"div",40)(3,"span",41),o(4),n()(),a(5,"div",16)(6,"h4",42),o(7),n(),a(8,"p",43),o(9),n()()(),a(10,"div",44)(11,"div",45)(12,"mat-icon",46),o(13,"phone"),n(),a(14,"span",26),o(15),n()(),a(16,"div",45)(17,"mat-icon",46),o(18,"email"),n(),a(19,"span",26),o(20),n()()(),f(21,Te,8,5,"div",47)(22,$e,6,0,"div",48),n()}if(r&2){let e=t.$implicit,i=g(2);s(4),b(" ",i.getInitials(e.nombre)," "),s(3),u(e.nombre),s(2),b("",i.calculateAge(e.fechaNacimiento)," a\xF1os"),s(6),u(e.telefono||"Sin tel\xE9fono"),s(5),u(e.email),s(),p("ngIf",e.tieneProgramaActivo),s(),p("ngIf",!e.tieneProgramaActivo)}}function Re(r,t){if(r&1&&(a(0,"div",36),f(1,je,23,7,"div",37),n()),r&2){let e=g();s(),p("ngForOf",e.pacientesVinculados)}}function Le(r,t){r&1&&(a(0,"p",35),o(1,"No hay pacientes vinculados"),n())}var ce=class r{constructor(t,e,i,d,l){this.db=t;this.authService=e;this.appointmentService=i;this.router=d;this.dialog=l}pacientes=[];rutinas=[];citas=[];proximasCitas=[];todasLasCitas=[];pacientesVinculados=[];loading=!0;destroy$=new F;navLinks=[{label:"Dashboard",route:"/fisioterapeuta/dashboard"},{label:"Agenda",route:"/fisioterapeuta/agenda"},{label:"Pacientes",route:"/fisioterapeuta/pacientes"},{label:"Historial de Cobros",route:"/fisioterapeuta/historial-cobros"}];ngOnInit(){this.loadData()}loadData(){this.db.getPacientes().subscribe(t=>this.pacientes=t),this.db.getRutinas().subscribe(t=>this.rutinas=t),this.db.getCitasByFisioterapeuta("1").subscribe(t=>{this.citas=t,this.loading=!1}),this.loadProximasCitas(),this.loadPacientesVinculados()}loadPacientesVinculados(){let t=this.authService.getUserId();if(!t){console.error("No fisioterapeuta ID available");return}this.appointmentService.getLinkedPatients(t).pipe(S(this.destroy$)).subscribe({next:e=>{this.pacientesVinculados=e},error:e=>{console.error("Error loading pacientes vinculados:",e)}})}loadProximasCitas(){let t=this.authService.getUserId();if(console.log("\u{1F50D} loadProximasCitas - fisioterapeutaId:",t),!t){console.error("\u274C No fisioterapeuta ID available");return}let e=new Date,i=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;console.log("\u{1F4C5} Fecha actual (hoy):",i);let d=[];for(let c=0;c<7;c++){let m=new Date(e);m.setDate(m.getDate()+c);let x=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`;d.push(x)}console.log("\u{1F4C5} Fechas a cargar:",d);let l=[],h=0;d.forEach((c,m)=>{this.appointmentService.getAppointmentsByDay(t,c).pipe(S(this.destroy$)).subscribe({next:x=>{console.log(`\u2705 Citas recibidas para ${c}:`,x.length),l.push(...x),h++,h===d.length&&this.procesarProximasCitas(l,i)},error:x=>{console.error(`\u274C Error loading citas para ${c}:`,x),h++,h===d.length&&this.procesarProximasCitas(l,i)}})})}procesarProximasCitas(t,e){console.log("\u{1F4CA} Total citas del rango de 7 d\xEDas:",t.length),this.todasLasCitas=t;let i=new Date,d=i.getHours().toString().padStart(2,"0")+":"+i.getMinutes().toString().padStart(2,"0");console.log("\u23F0 Hora actual:",d),console.log("\u{1F550} Comparando citas con datetime:",e+" "+d);let l=t.filter(c=>{let m=`${c.fecha}T${c.hora}`,x=`${e}T${d}`,y=new Date(m).getTime(),pe=new Date(x).getTime();return y>=pe});console.log("\u2714\uFE0F Citas v\xE1lidas (desde datetime actual):",l.length);let h=l.sort((c,m)=>{let x=new Date(`${c.fecha}T${c.hora}`),y=new Date(`${m.fecha}T${m.hora}`);return x.getTime()-y.getTime()});this.proximasCitas=h.filter(c=>{let m=this.getCitaColor(c);return m.includes("yellow")||m.includes("blue")||m.includes("orange")}).slice(0,5),console.log("\u{1F3AF} Pr\xF3ximas 5 citas filtradas:",this.proximasCitas.length,this.proximasCitas)}getCountPendingAppointments(){return this.proximasCitas.length}getColorFisio(t){switch(t?.toLowerCase()){case"pendiente":return"bg-yellow-400";case"confirmadofisio":return"bg-blue-400";case"cobrado":return"bg-green-400";case"cobropendiente":return"bg-orange-400";case"canceladafisio":return"bg-red-400";default:return"bg-gray-400"}}getColorPaciente(t){switch(t?.toLowerCase()){case"pendiente":return"bg-yellow-400";case"confirmadopaciente":return"bg-blue-400";case"canceladapaciente":return"bg-orange-400";default:return"bg-gray-400"}}getCitaColor(t){let e=t.estadoFisio?.toLowerCase(),i=t.estadoPaciente?.toLowerCase();return e==="cobrado"?"bg-green-100 border-green-300":e==="cobropendiente"?"bg-orange-100 border-orange-300":e==="canceladafisio"||i==="canceladapaciente"?"bg-red-100 border-red-300":e==="confirmadofisio"&&i==="confirmadopaciente"?"bg-blue-100 border-blue-300":"bg-yellow-100 border-yellow-300"}getCountAmarillasCitas(){return this.todasLasCitas.filter(t=>this.getCitaColor(t).includes("yellow")).length}getCountAzulesCitas(){return this.todasLasCitas.filter(t=>this.getCitaColor(t).includes("blue")).length}getCountVerdesCitas(){return this.todasLasCitas.filter(t=>this.getCitaColor(t).includes("green")).length}getCountRojasCitas(){return this.todasLasCitas.filter(t=>this.getCitaColor(t).includes("red")).length}openResumenModal(){this.dialog.open(V,{width:"500px",data:{}})}getInitials(t){return t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)}calculateAge(t){if(!t)return 0;let e=new Date,i=new Date(t),d=e.getFullYear()-i.getFullYear(),l=e.getMonth()-i.getMonth();return(l<0||l===0&&e.getDate()<i.getDate())&&d--,d}isHoyCita(t){let e=new Date,i=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;return t===i}formatFecha(t){let[e,i,d]=t.split("-"),l=new Date(parseInt(e),parseInt(i)-1,parseInt(d)),h=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],m=["Dom","Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b"][l.getDay()],x=parseInt(d),y=h[l.getMonth()];return`${m} ${x} de ${y}`}onChangeInfo(){console.log("Cambiar informaci\xF3n - pendiente de implementar")}logout(){this.authService.logout(),this.router.navigate(["/"])}navigateToPaciente(t){this.router.navigate(["/fisioterapeuta/pacientes"],{queryParams:{pacienteId:t}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||r)(v(le),v($),v(O),v(Q),v(L))};static \u0275cmp=w({type:r,selectors:[["app-fisioterapeuta-dashboard"]],decls:26,vars:5,consts:[["noCitas",""],["noPacientes",""],[1,"min-h-screen","bg-background"],[3,"changeInfo","logout","navLinks"],[1,"container","mx-auto","px-4","py-8"],[1,"text-4xl","font-bold","text-foreground","mb-8"],[1,"mb-8"],["className","flex items-center justify-between w-full !grid-cols-2 px-6"],["title","Ver resumen del d\xEDa",1,"flex","items-center","justify-center","gap-2","px-4","py-2","rounded-lg","bg-primary","text-primary-foreground","hover:bg-primary/90","transition-colors","text-sm","font-medium","w-fit",3,"click"],[1,"text-lg"],["class","space-y-4",4,"ngIf","ngIfElse"],["class","grid grid-cols-1 md:grid-cols-2 gap-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],["class","p-4 rounded-lg border-2 flex items-center justify-between gap-4",3,"ngClass",4,"ngFor","ngForOf"],["class","text-center text-xs text-muted-foreground pt-2",4,"ngIf"],[1,"p-4","rounded-lg","border-2","flex","items-center","justify-between","gap-4",3,"ngClass"],[1,"flex-1","min-w-0"],["class","mb-2",4,"ngIf"],[1,"flex","items-center","gap-3","mb-2"],[1,"flex-shrink-0","w-16","font-bold","text-lg","text-foreground"],[1,"flex","items-center","gap-2","mb-1"],[1,"text-foreground","text-base","flex-shrink-0"],[1,"font-semibold","text-foreground","truncate"],[1,"text-xs","text-muted-foreground","truncate"],[1,"flex","items-center","gap-2","ml-19","text-xs","text-foreground"],[1,"text-muted-foreground","text-sm","flex-shrink-0"],[1,"truncate"],[1,"flex","items-center","gap-3","flex-shrink-0"],[1,"flex","items-center","gap-1","px-2","py-1","rounded","bg-white/50"],[1,"w-3","h-3","rounded-full","flex-shrink-0",3,"ngClass"],[1,"text-xs","font-semibold","text-muted-foreground","whitespace-nowrap"],[1,"mb-2"],[1,"text-xs","font-semibold","text-primary","bg-primary/10","px-2","py-1","rounded-full"],[1,"text-center","text-xs","text-muted-foreground","pt-2"],["routerLink","/fisioterapeuta/agenda",1,"text-primary","font-medium","hover:underline"],[1,"text-muted-foreground","text-center","py-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","p-4 rounded-lg border-2 border-border hover:border-primary transition-all cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"p-4","rounded-lg","border-2","border-border","hover:border-primary","transition-all","cursor-pointer",3,"click"],[1,"flex","items-start","gap-3","mb-3"],[1,"w-12","h-12","rounded-full","bg-primary/10","flex","items-center","justify-center","flex-shrink-0"],[1,"text-lg","font-semibold","text-primary"],[1,"font-semibold","text-foreground","mb-1"],[1,"text-sm","text-muted-foreground"],[1,"grid","grid-cols-2","gap-2","mb-3","text-sm"],[1,"flex","items-center","gap-1","text-muted-foreground"],[1,"text-base"],["class","mt-3 space-y-2",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"mt-3","space-y-2"],[1,"flex","items-center","justify-between","text-xs"],[1,"text-muted-foreground"],[1,"font-medium","text-foreground"],[1,"w-full","bg-muted","rounded-full","h-2","overflow-hidden"],[1,"bg-primary","h-full","transition-all","duration-300"],[1,"mt-3"],[1,"flex","items-center","gap-1","text-xs","text-muted-foreground"],[1,"text-sm"]],template:function(e,i){if(e&1){let d=H();a(0,"div",2)(1,"app-header",3),C("changeInfo",function(){return D(d),E(i.onChangeInfo())})("logout",function(){return D(d),E(i.logout())}),n(),a(2,"main",4)(3,"h2",5),o(4,"Dashboard Fisioterapeuta"),n(),a(5,"app-card",6)(6,"app-card-header",7)(7,"app-card-title"),o(8,"Pr\xF3ximas 5 Citas"),n(),a(9,"button",8),C("click",function(){return D(d),E(i.openResumenModal())}),a(10,"mat-icon",9),o(11,"assessment"),n(),a(12,"span"),o(13,"Resumen"),n()()(),a(14,"app-card-content"),f(15,Ae,4,6,"div",10)(16,Pe,2,0,"ng-template",null,0,z),n()(),a(18,"app-card",6)(19,"app-card-header")(20,"app-card-title"),o(21,"Mis Pacientes"),n()(),a(22,"app-card-content"),f(23,Re,2,1,"div",11)(24,Le,2,0,"ng-template",null,1,z),n()()()()}if(e&2){let d=Y(17),l=Y(25);s(),p("navLinks",i.navLinks),s(14),p("ngIf",i.proximasCitas.length>0)("ngIfElse",d),s(8),p("ngIf",i.pacientesVinculados.length>0)("ngIfElse",l)}},dependencies:[T,M,A,P,K,X,Z,ee,te,ie,R,j,k,re],encapsulation:2})};export{ce as FisioterapeutaDashboardComponent};
